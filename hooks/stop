#!/bin/bash
set -e

# OpenClaw Juju Charm - Stop Hook
# This hook stops the OpenClaw Gateway service

CHARM_DIR="$(cd "$(dirname "${BASH_SOURCE[0]}")/.." && pwd)"
source "$CHARM_DIR/hooks/common.sh"

log_info "Stopping OpenClaw"

status-set maintenance "Stopping OpenClaw service"

# Stop the service
stop_openclaw

# Close ports
close_ports

status-set maintenance "OpenClaw stopped"
log_info "OpenClaw stopped successfully"
